<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Nomad Documentation</title>
  <meta content="application/xhtml+xml; charset=ISO-8859-1" http-equiv="content-type" />
  <link media="all" rel="stylesheet" charset="UTF-8" type="text/css" href="./css-styles.css" />
<style type="text/css">
/* <![CDATA[ */

/* document specific css definitions */

/* ]]> */
</style>
</head>
<body>
<div style="padding:10px;">

<div class="dvGoBackToIndex">
<a href="index.html">&lArr; Index</a>
</div>

<h1>ComPort</h1>

<h1><a name="design-and-impl">1. Design and Implementation</a></h1>

<h2>Why you should read this</h2>
<p>
<span style="color:red">Todo</span>
</p>

<h2>Ideas behind</h2>
<p>
While designing the system that communicates with the Nord Module there
were several points important for us. The communication system
<ol>
<li>should be easy to use from within Nomad (for programming)</li>
<li>should not break the application if there is no communication system
(for development:debugging)</li>
<li>should be easy switched to another version (for development:debugging)</li>
<li>should be independent, so that it can be updated seperately from the main application</li>
</ol>
</p>

<h3>1. Making programming easier</h3>
<p>
  To make it easy to communicate with the Nord Modular from within Nomad we
  introduced the <span class="cd">Synth</span> class and the
  <span class="cd">ComPort</span> interface.
</p>

<p>
  <span class="cd">ComPort</span> is the interface to the low level
  libraries that communicates with the Nord Modular directly.
</p>

<p>
  The <span class="cd">Synth</span> layer hides the
  <span class="cd">ComPort</span> interface and provides
  additional functionality like <span class="cd">connect()</span>/
  <span class="cd">disconnect()</span> methods or automatically
  installing the timer for frequently sending
  <span class="cd">hearbeat()</span> messages to the synth.
</p>

<p>
  Although both classes could have been made into one class this
  way makes it easier to switch to another <span class="cd">ComPort</span>
  interface because only the internal layer can be replaced and
  Nomad has not to take care of this.
</p>

<p style="text-align:center;">
  <img src="./res/comport/comport-synth-model.png" width="497" height="168"
       style="border:solid #7484CD 1px;" title="figure:comport/synth model" /> <br />
  <span style="font-size:smaller;color:#3A4267;">figure:comport/synth model</span>
</p>


<h3>2. No ComPort available</h3>
<p>
  Because at the beginning of development we had no
  <span class="cd">ComPort</span> implementation and to
  help in debugging there is the <span class="cd">NullComPort</span> class
  that implements the <span class="cd">ComPort</span> interface.
  The <span class="cd">NullComPort</span> can not connect to the
  synth, but it can act is if it would be able to have a
  connection. Actions and messages are printed to the standard
  output device which should help development.
</p>

<h3>3. and 4. Switching the ComPort interface</h3>
<p>
  There are several reasons to make it possible to switch
  the <span class="cd">ComPort</span> interface implementation.
  Even at runtime.
  <ul>
    <li>To help with debugging.</li>
    <li>To reset the <span class="cd">ComPort</span> without a restart
    of Nomad.</li>
    <li>Because the <span class="cd">ComPort</span> implementation
    is developed separate from Nomad it should be able to
    replace it without replacing the whole application.
    </li>
  </ul>
  This is simply achieved by making the
  <span class="cd">ComPort</span> interface be loaded
  as an optional plugin from the plugins directory.
  (Note:<span class="cd">NullComPort</span> is loaded as plugin too but
  is built into Nomad)
  This also helps us to develop an update function for Nomad,
  that can download newer or different
  <span class="cd">ComPort</span> implementations.
</p>

<h1><a name="changelog">Changelog</a></h1>
<p>
<pre class="changelog"><code>2005-11-14 (<a href="mailto:christianschneider@fastmail.fm">Christian</a>) - Initial Document</code></pre>
</p>

</div>
</body>
</html>

